(function(e,c,a,f){var b=function(){return this.init.apply(this,arguments)};b.prototype={defaults:{from:0,to:100,onstatechange:function(){},ondragend:function(){},onbarclicked:function(){},isRange:false,showLabels:true,showScale:true,step:1,format:"%s",theme:"theme-blue",width:300,disable:false,snap:false},template:'<div class="slider-container">			<div class="back-bar">								<div class="selected-bar"></div>								<div class="pointer low" labelIdx="low"></div><div class="pointer-label low">123456</div>								<div class="pointer high" labelIdx="high"></div><div class="pointer-label high">456789</div>								<div class="clickable-dummy"></div>						</div>						<div class="scale"></div>		</div>',init:function(h,g){this.options=e.extend({},this.defaults,g);this.inputNode=e(h);this.options.value=this.inputNode.val()||(this.options.isRange?this.options.from+","+this.options.from:""+this.options.from);this.domNode=e(this.template);this.domNode.addClass(this.options.theme);this.inputNode.after(this.domNode);this.domNode.on("change",this.onChange);this.pointers=e(".pointer",this.domNode);this.lowPointer=this.pointers.first();this.highPointer=this.pointers.last();this.allPointers=[this.lowPointer];this.labels=e(".pointer-label",this.domNode);this.lowLabel=this.labels.first();this.highLabel=this.labels.last();this.scale=e(".scale",this.domNode);this.bar=e(".selected-bar",this.domNode);this.clickableBar=this.domNode.find(".clickable-dummy");this.interval=this.options.to-this.options.from;this.reverse=this.interval<0;this.rangeCount=this.options.rangeCount||1;this.render()},render:function(){if(this.inputNode.width()===0&&!this.options.width){console.log("jRange : no width found, returning");return}else{this.options.width=this.options.width||this.inputNode.width();this.domNode.width(this.options.width);this.inputNode.hide()}if(this.isSingle()){this.lowPointer.hide();this.lowLabel.hide()}else{for(var h=1;h<this.rangeCount;h++){var g=e('<div class="pointer mid mid'+h+'" labelIdx="mid'+h+'"></div>');var j=e('<div class="pointer-label mid mid'+h+'">888888</div>');this.highPointer.before(g);g.after(j);this.allPointers[h]=g}this.allPointers[this.allPointers.length]=this.highPointer;this.pointers=e(".pointer",this.domNode);this.labels=e(".pointer-label",this.domNode)}if(!this.options.showLabels){this.labels.hide()}this.attachEvents();if(this.options.showScale){this.renderScale()}this.setValue(this.options.value)},isSingle:function(){if(typeof(this.options.value)==="number"){return true}return(this.options.value.indexOf(",")!==-1||this.options.isRange)?false:true},attachEvents:function(){this.clickableBar.click(e.proxy(this.barClicked,this));this.pointers.on("mousedown touchstart",e.proxy(this.onDragStart,this));this.pointers.bind("dragstart",function(g){g.preventDefault()})},onDragStart:function(g){if(this.options.disable||(g.type==="mousedown"&&g.which!==1)){return}g.stopPropagation();g.preventDefault();var h=e(g.target);this.pointers.removeClass("last-active");h.addClass("focused last-active");this[(h.hasClass("low")?"low":"high")+"Label"].addClass("focused");e(a).on("mousemove.slider touchmove.slider",e.proxy(this.onDrag,this,h));e(a).on("mouseup.slider touchend.slider touchcancel.slider",e.proxy(this.onDragEnd,this))},onDrag:function(i,h){h.stopPropagation();h.preventDefault();if(h.originalEvent.touches&&h.originalEvent.touches.length){h=h.originalEvent.touches[0]}else{if(h.originalEvent.changedTouches&&h.originalEvent.changedTouches.length){h=h.originalEvent.changedTouches[0]}}var g=h.clientX-this.domNode.offset().left;this.domNode.trigger("change",[this,i,g])},onDragEnd:function(g){this.pointers.removeClass("focused").trigger("rangeslideend");this.labels.removeClass("focused");e(a).off(".slider");this.options.ondragend.call(this,this.options.value)},barClicked:function(n){if(this.options.disable){return}var o=n.pageX-this.clickableBar.offset().left;if(this.isSingle()){this.setPosition(this.pointers.last(),o,true,true)}else{var g=Math.abs(parseFloat(this.lowPointer.css("left"),10)),j=Math.abs(parseFloat(this.highPointer.css("left"),10)),p=g+(j-g)/2,h;if(o<=g){h=this.lowPointer}else{if(o>=j){h=this.highPointer}else{if(this.rangeCount<=1){h=o>p?this.highPointer:this.lowPointer}else{for(var m=1,k=this.pointers.length;m<k;m++){var r=this.pointers.eq(m);var q=m==0?r:this.pointers.eq(m-1);g=Math.abs(parseFloat(q.css("left"),10));j=Math.abs(parseFloat(r.css("left"),10));p=g+(j-g)/2;if(o>g&&o<j){h=o>p?r:q;break}}}}}this.setPosition(h,o,true,true)}this.options.onbarclicked.call(this,this.options.value)},onChange:function(j,n,g,i){var h,k;h=0;k=n.domNode.width();if(!n.isSingle()){var m=g.hasClass("low")?n.lowPointer:g.prevAll(".pointer").first();var o=g.hasClass("high")?n.highPointer:g.nextAll(".pointer").first();h=g.hasClass("low")?0:parseFloat(m.css("left"))+(m.width()/2);k=g.hasClass("high")?n.domNode.width():parseFloat(o.css("left"))+(o.width()/2)}var l=Math.min(Math.max(i,h),k);n.setPosition(g,l,true)},setPosition:function(g,m,n,j){var k=parseFloat(this.lowPointer.css("left"))||0;var l=parseFloat(this.highPointer.css("left"))||0;var h=this.highPointer.width()/2;if(!n){m=this.prcToPx(m)}if(this.options.snap){var i=this.correctPositionForSnap(m);if(i===-1){return}else{m=i}}if(g[0]===this.highPointer[0]){l=Math.round(m-h)}else{if(g[0]===this.lowPointer[0]){k=Math.round(m-h)}}g[j?"animate":"css"]({left:Math.round(m-h)});var o=Math.round(l-k);this.bar[j?"animate":"css"]({width:Math.abs(o),left:this.isSingle()?0:k});this.showPointerValue(g,m,j);this.isReadonly()},correctPositionForSnap:function(g){var h=this.positionToValue(g)-this.options.from;var j=this.options.width/(this.interval/this.options.step),i=(h/this.options.step)*j;if(g<=i+j/2&&g>=i-j/2){return i}else{return -1}},setValue:function(j){var g=j.toString().split(",");g[0]=parseFloat(g[0]);g[0]=isNaN(g[0])?this.options.from:g[0];if(this.reverse){g[0]=Math.max(Math.min(g[0],this.options.from),this.options.to)+""}else{g[0]=Math.min(Math.max(g[0],this.options.from),this.options.to)+""}if(this.rangeCount>1){for(var h=1;h<=this.rangeCount;h++){g[h]=parseFloat(g[h]);g[h]=isNaN(g[h])?g[h-1]:g[h];if(this.reverse){g[h]=Math.max(Math.min(g[h],g[h-1]),this.options.to)+""}else{g[h]=Math.min(Math.max(g[h],g[h-1]),this.options.to)+""}}}else{if(g.length>1){g[1]=parseFloat(g[1]);g[1]=isNaN(g[1])?this.options.to:g[1];if(this.reverse){g[1]=Math.max(Math.min(g[1],this.options.from),this.options.to)+""}else{g[1]=Math.min(Math.max(g[1],this.options.from),this.options.to)+""}}}this.options.value=j;var k=this.valuesToPrc(g.length>=2?g:[0,g[0]]);if(this.isSingle()){this.setPosition(this.highPointer,k[1])}else{this.setPosition(this.lowPointer,k[0]);for(var h=1;h<=this.rangeCount;h++){this.setPosition(this.allPointers[h],k[h])}}},renderScale:function(){var h=this.options.scale||[this.options.from,this.options.to];var k=Math.round((100/(h.length-1))*10)/10;var j="";for(var g=0;g<h.length;g++){j+='<span style="left: '+g*k+'%">'+(h[g]!="|"?"<ins>"+h[g]+"</ins>":"")+"</span>"}this.scale.html(j);e("ins",this.scale).each(function(){e(this).css({marginLeft:-e(this).outerWidth()/2})})},getBarWidth:function(){var g=this.options.value.split(",");if(g.length>1){return parseFloat(g[1])-parseFloat(g[0])}else{return parseFloat(g[0])}},showPointerValue:function(g,k,i){var m=e(".pointer-label",this.domNode).filter("."+g.attr("labelIdx"));var o;var n=this.positionToValue(k);if(e.isFunction(this.options.format)){var l=this.isSingle()?f:(g.hasClass("low")?"low":"high");o=this.options.format(n,l)}else{o=this.options.format.replace("%s",n)}var h=m.html(o).width(),j=k-h/2;j=Math.min(Math.max(j,0),this.options.width-h);m[i?"animate":"css"]({left:j});this.setInputValue(g,n)},valuesToPrc:function(h){var g=((parseFloat(h[0])-parseFloat(this.options.from))*100/this.interval);var j=[g];for(var k=1;k<=this.rangeCount;k++){j[k]=((parseFloat(h[k])-parseFloat(this.options.from))*100/this.interval)}return j},prcToPx:function(g){return(this.domNode.width()*g)/100},isDecimal:function(){return((this.options.value+this.options.from+this.options.to).indexOf(".")===-1)?false:true},positionToValue:function(i){var h=(i/this.domNode.width())*this.interval;h=parseFloat(h,10)+parseFloat(this.options.from,10);if(this.isDecimal()){var g=Math.round(Math.round(h/this.options.step)*this.options.step*100)/100;if(g!==0){g=""+g;if(g.indexOf(".")===-1){g=g+"."}while(g.length-g.indexOf(".")<3){g=g+"0"}}else{g="0.00"}return g}else{return Math.round(h/this.options.step)*this.options.step}},setInputValue:function(k,h){if(this.isSingle()){this.options.value=h.toString()}else{var g=this.options.value.split(",");for(var j in this.allPointers){if(this.allPointers[j][0]===k[0]){g[j]=h.toString();break}}this.options.value=g.join(",")}if(this.inputNode.val()!==this.options.value){this.inputNode.val(this.options.value).trigger("change");this.options.onstatechange.call(this,this.options.value)}},getValue:function(){return this.options.value},getOptions:function(){return this.options},getRange:function(){return this.options.from+","+this.options.to},isReadonly:function(){this.domNode.toggleClass("slider-readonly",this.options.disable)},disable:function(){this.options.disable=true;this.isReadonly()},enable:function(){this.options.disable=false;this.isReadonly()},toggleDisable:function(){this.options.disable=!this.options.disable;this.isReadonly()},updateRange:function(h,i){var g=h.toString().split(",");this.interval=parseInt(g[1])-parseInt(g[0]);if(i){this.setValue(i)}else{this.setValue(this.getValue())}}};var d="jRange";e.fn[d]=function(i){var h=arguments,g;this.each(function(){var l=e(this),k=e.data(this,"plugin_"+d),j=typeof i==="object"&&i;if(!k){l.data("plugin_"+d,(k=new b(this,j)));e(c).resize(function(){k.setValue(k.getValue())})}if(typeof i==="string"){g=k[i].apply(k,Array.prototype.slice.call(h,1))}});return g||this}})(jQuery,window,document);